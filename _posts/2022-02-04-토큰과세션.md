---

title: 인증과 인가
categories: [인증/인가, 인증과 인가]
tags: [인증, 인증/인가, 인가]     # TAG names should always be lowercase
author:
  name: Choi Jin Kyu
  link: https://github.com/hmcck27
toc: true
date: 2022-02-04

img_path: /assets/img/mdImage/

---

# **인증과 인가**

어플리케이션을 개발할때, 로그인 기능이 필요하다면  
우리는 회원가입, 로그인 기능을 개발한다.  

나도 실제로 서비스를 개발하면서 회원가입, 로그인을 개발할 일이 있었는데  
자세하게 정리해본 적이 없어서 이번 기회에 정리해보려 한다.  

인증/인가에 대해서 먼저 알아보자.  

인증과 인가는 무엇이 다를까 ?  
간단한 예시를 들어 생각해보자.  

내가 직장 상사의 집에 초대받았다.  
직장 상사는 내 얼굴과 이름을 알고있다.  
문을 두드리고 직장 상사는 **나를 확인하고 들어간다.**
(여기까지가 인증이다.)  

집에 들어온 나는 거실에 있다.  
상사의 집에 초대됬으니 함부로 다른 방에 들어가서는 안된다.  
이 집에서 내 신분은 **손님**이다.  
함부로 집에서 돌아다니면 앞으로 내 직장생활이 평탄하지 못할 것이다.  
즉 난 직장 상사 집의 안방같은 private한 공간은 들어갈 수 없다.  
나에게 허락된 공간은 거실과 주방이다.(이게 인가이다.)

---

## **인증**
유저가 누구인지 파악하는 절차  
즉 회원가입하고 로그인하는 것.  

회원가입의 과정은 
1. ID과 Password를 생성한다.
2. password를 암호화해서 DB에 저장한다.  

로그인의 과정은  
1. 유저가 자신의 ID와 password를 입력한다.
2. ID-password pair가 실제로 DB에 존재하는지 확인한다.
3. 존재한다면 로그인이 성공되고 해당 유저에게 토큰/세션을 준다. 존재하지 않는다면, 로그인이 실패한다.  
4. 발행된 토큰/세션은 유저에 요청에 첨부되어 서버에 요청을 보내서 매번 로그인하는 과정을 생략할 수 있다.  

이게 인증의 과정이다.

**토큰과 세션** 대표적으로 두가지 방법이 있는데  
현대 웹서비스에서는 토큰을 주로 사용하고, 토큰을 발행하는 대표적인 방법은 **JWT**이다.  

**JWT**에 대해서는 다음에 더 자세히 정리해보자. -> [JWT]({% link /2022-02-05-JWT.md %})

---

## **인가**
유저가 요청에 대한 권한이 있는지 확인하는 것.  

애플리케이션에 요청을 보내는 클라이언트가 누구이고 언제 어떻게 요청을  
보내고 있는지 알기 위해서 인증/인가를 구현한다.  

기본적으로 로그인을 해야만 사용할 수 있는 기능들은  
인증/인가를 동반한 api를 사용하게 된다.  

흔히 role이라고 하는데 예를 들어서 유저를 삭제 처리하는 api가 있다고 해보자.  
해당 유저를 삭제하는 api를 다른 유저가 사용할 수 있다면 난리가 날것이다.  
유저를 삭제하는 이 api는 유저가 아닌 관리자 role을 가진 사람만 사용할 수 있다.  

이 role을 확인해서 해당 리소스를 사용할 권한이 있는지 확인하는게 인가이다.  

---

## 정리

인증과 인가는 어느 서비스를 개발하던 꼭 필요한 부분이다.  
현대 웹에서의 보안이 중요한 이슈로 떠오르고 있고  
인증과 인가에 대해서는 어느정도 표준이 정해진듯 하다.  

이번 인증과 인가가 정확히 뭔지 알아봤다.  
그리고 인증과 인가는 워낙 중요한 필드라서 키워드 중심으로 정리해볼 생각이다.  
일하는 곳에서 인증/인가에 해당하는 부분을 리팩토링할 일이 생길것 같아서  
이번 기회에 싹 정리해본다.  

키워드 : 토큰vs세션, JWT, Oauth2, Spring security   
다음과 같은 순서로 정리해볼 생각이다.