# Http와 Https의 차이

이번에 한번 http와 https의 차이를 정리해보자 !  

---

## Http란 ?
Hyper Text Transfer Protocol  
http는 클라이언트/서버의 데이터를 주고받기 위한 프로토콜이다.    
application layer(tcp/ip위의)에서 적용되는 프로토콜이다.    

특징  
1. 80번 포트 사용
2. stateless하다
3. 비암호화

구조
1. Method : GET / POST / PUT / DELETE
2. Path : / /student
3. version of protocol : HTTP/1.1 HTTP2

하지만 http는 암호화되지 않은 평문이다.  
데이터를 담아서 전송하면 제 3자가 조회가 가능하다.  

---

## Https란 ?

Hyper Text Transfer Protocol Secure  

HTTP에 데이터 암호화가 추가되었다.  

특징
1. 443포트 사용
2. 대칭키 암호화, 비대칭키 암호화 사용

대칭키 암호화란 ?  
1. 클라이언트와 서버가 동일한 키를 사용해서 암호화/복호화한다.
2. 키가 노출되면 위험하지만 그만큼 연산 속도가 빠르다.

비대칭키 암호화란 ?
1. 1개의 쌍으로 구성된 공개키와 개인키를 암호화/복호화하는데 사용한다.
2. 키가 노출되어도 안전하지만 연산속도가 느리다.  

공개키란 ?
1. 모두에게 공개가능한 키

개인키란 ?
1. 나만 갖고 있는 키

공개키 암호화란 ?
1. 공개키로 암호화하고 개인키로만 복호화가 가능하다.

개인키 암호화란 ?
1. 개인키로 암호화하고 공개키로 복호화가 가능하다.  

Https 동작과정
1. hand-shaking이 선행된다.
    서버와 클라이언트간의 세션키를 교환한다. 여기서 세션키는 주고 받는 데이터를 암호화하기 위한 대칭키이다. 데이터간의 교환에는 빠른 연산 속도가 필요하다. 
2. session key 교환은 비대칭키 사용.
    처음 연결을 성립하여 안전하게 세션키를 공유하는 과정에서 비대칭키로 암호화한다.  
    즉 세션키 자체를 공유하는 과정은 비교적 연산은 느리지만 안전하게 진행하는 것이다.  

https 연결과정
1. 클라이언트가 서버로 최초 연결시도
2. 서버는 공개키로 된 인증서를 브라우저에게 넘겨줌
3. 브라우저는 인증서의 유효성을 검증하고, 세션키를 발급
4. 서버의 공개키로 세션키를 암호환후 서버로 전송
5. 서버는 세션키를 서버의 개인키로 복호화해서 세션키를 얻음
6. 클라이언트와 서버는 동일한 세션키를 공유하고 앞으로의 전송에서 세션키로 암호화/복호화를 진행.

HTTPS의 발급과정
일반적으로 서버는 클라이언트에게 보내줄 공개키를 생성해야 하는데,  
이걸 인증된 기관에게 받는다.  
1. 내 서버에서 개인키와 공개키를 미리 발급함
2. acm같은 인증서 발급 기관에게 돈을 지불하고 공개키를 저장하는 인증서를 받음
3. acm은 인증서를 생성하고 acm의 개인키로 암호화함.
4. 내 서버는 인증서를 클라이언트에게 전달
5. 클라이언트는 공개키를 통해서 복호화해서 공개키를 얻음
