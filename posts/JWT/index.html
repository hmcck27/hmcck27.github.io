<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="JWT" /><meta name="author" content="Choi Jin Kyu" /><meta property="og:locale" content="en" /><meta name="description" content="JWT (Json Web Token)" /><meta property="og:description" content="JWT (Json Web Token)" /><link rel="canonical" href="https://hmcck27.github.io/posts/JWT/" /><meta property="og:url" content="https://hmcck27.github.io/posts/JWT/" /><meta property="og:site_name" content="개복치의 개발 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-06T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JWT" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Choi Jin Kyu" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Choi Jin Kyu"},"description":"JWT (Json Web Token)","url":"https://hmcck27.github.io/posts/JWT/","@type":"BlogPosting","headline":"JWT","dateModified":"2022-02-06T00:00:00+08:00","datePublished":"2022-02-06T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://hmcck27.github.io/posts/JWT/"},"@context":"https://schema.org"}</script><title>JWT | 개복치의 개발 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="개복치의 개발 블로그"><meta name="application-name" content="개복치의 개발 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/jk.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">개복치의 개발 블로그</a></div><div class="site-subtitle font-italic">공부한걸 기록하자 !</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/hmcck27" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hmcck27','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JWT</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>JWT</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/hmcck27">Choi Jin Kyu</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-02-06 00:00:00 +0800" data-toggle="tooltip" data-placement="bottom" title="Sun, Feb 6, 2022, 12:00 AM +0800" >Feb 6</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4559 words"> <em>25 min</em> read</span></div></div></div><div class="post-content"><h1 id="jwt-json-web-token">JWT (Json Web Token)</h1><p>늘 개발하면서 인증처리는 JWT를 사용했다.<br /> 자연스럽게 사용했는데 구체적인 원리에 대해서 알아본적은 없다.<br /> JWT의 정체가 뭔지 이번에 한번 정리해보자.</p><hr /><h2 id="jwt가-뭘까-"><strong>JWT가 뭘까 ?</strong><a href="#jwt가-뭘까-" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Json Web Token 말만 이해해보면,</p><p>토큰 기반 인증에서 쓰이는 토큰의 종류인데 뭔가 json과 연관이 있는것 같다.</p><p>클라이언트와 서버에서 json 객체를 사용해서 가벼우면서 자가 수용적인 방식으로 데이터를 전송하는것을 말한다.<br /> 현대 웹 대부분이 사용하는 <strong>인터넷 표준 인증 방식</strong>이라고 볼 수 있다.</p><p>기본적으로 유저인지 아닌지 파악은 세션과 동일하다.<br /> 다른점은 JWT는 서명된 토큰이라는 점이다.</p><p>간단하게 설명하면,<br /> “JWT = 데이터 + 서명” 일때,<br /> 데이터는 누구나 베낄 수 있지만 서명은 그렇지 않다.<br /> 정말로 서버에서 발급해준 토큰만이 올바른 서명을 가진다.<br /> 따라서 데이터 자체는 탈취에 위험하다.<br /> JWT의 강점은 <strong>서명</strong>이다.</p><p>JWT의 또다른 특징으로는 JWT는 자가 수용적이라는 것이다.<br /> <strong>자가 수용적</strong>이라는 말은 필요한 정보를 자체적으로 갖고 있다는 말이다.<br /> 필요한 정보란 뭘까 ?</p><ol><li>토큰에 대한 기본 정보<li>전송되는 데이터. 즉 클라이언트, 서버에서 인증에 사용하는 데이터. (로그인이라면 유저에 대한 데이터)<li>검증됐다는 것을 증명하는 signature.</ol><p>2번을 좀더 자세히 보자.</p><p>토큰 인증 방식에서는 토큰안에 사용자의 정보가 암호화되서 들어가 있다.<br /> 이 암호를 복호화하면 key-value의 형태로 데이터가 저장되있다.<br /> 즉 json 형태로 verification용 데이터를 저장하고<br /> 이걸 토큰으로 인코딩 + 암호화해서 서버에서 인증용으로 발급하는 방식이다.</p><p>예를 들면 이런식이다.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"jk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"집"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"피곤"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>같이 유저에 대한 정보를 담는 json을 해싱과 인코딩을 통해서 토큰으로 만든다. 그러면 eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9<br /> 이런식의 스트링이 만들어지고 이를 토큰으로 사용하게 된다.</p><p>JWT가 현대 웹에서의 인증 표준처럼 쓰여지고 있다는데<br /> 왜 그럴까 ?</p><hr /><h2 id="jwt의-특징"><strong>JWT의 특징</strong><a href="#jwt의-특징" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>JWT의 특징(장점)들을 알아보자.</p><ol><li><strong>많은 프로그래밍 언어, 프레임워크에서 지원한다.</strong><br /> JWT 같은 경우, 대부분의 주류 프로그래밍 언어에서 지원된다.<li><strong>http 통신에서 용이하게 전달가능하다.</strong><br /> 헤더에 담을 수도. 쿼리 스트링에 파라미터로 담을 수도 있다.<br /> 헤더에 담는다면 흔히 bearer token을 사용한다.<br /> bearer token과 OAUTH2에 대해서는 다음에 알아보자.<li><strong>self-contained하다</strong>.<br /> 위에서 설명한 것처럼 session과는 다르게 유저에 대한 정보를 서버가 갖고 있지 않고<br /> 토큰 그 자체가 들고 있다.<li><strong>다수의 디바이스에서 용이하게 인증이 가능하다.</strong><br /> sessionID가 디바이스가 달라지면서 공유되지 않는 반면에<br /> 토큰은 그 자체가 데이터를 들고 있기 때문에 다른 기기에서 같은 토큰을 사용할 수 있다.<li><strong>다수의 서버에서 용이하게 운영가능하다.</strong><br /> 요청이 들어오면 L4 로드밸런서에 의해서 각각의 서버로 요청이 분배되는데, session을 사용한다면<br /> 각 서버에서 sessionID : user 의 key-pair 데이터가 공유되어야 한다. ` 세션 클러스터링이라고 하는 기술인데 이 기술에다가 추가로 sessionID를 쿠키에 담는다면 CORS문제도 신경써야 한다. 반면에 토큰은 그 자체에 데이터가 있기 때문에 그런 수고로움을 갖지 않아도 된다.</ol><hr /><h2 id="jwt의-사용-시나리오"><strong>JWT의 사용 시나리오</strong><a href="#jwt의-사용-시나리오" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>내가 JWT를 썻을때는 인증과 인가 처리었다.<br /> 흔히 로그인을 할때 사용하게 되는데, 다음과 같은 시나리오로 JWT가 발급되고 사용된다.</p><ol><li>유저가 로그인을 한다. (signIn api request 보냄.)<li>서버가 유저의 정보에 기반한 토큰을 발행해서 유저에게 전달한다. (signIn api의 반환)<li>그 후 유저가 로그인한 상태에서만 사용할 수 있는 기능(마이 페이지, 내 열람 목록, 내 구매 목록, 등등..)을 사용하기 위해 api 를 사용한다면 request를 보낼때마다 JWT를 http에 담아서 보낸다.<li>서버는 해당 토큰이 유효한지 검증하고 권한이 있는지 확인해서(인가) 응답으로 response를 보낸다.</ol><hr /><h2 id="jwt의-구조"><strong>JWT의 구조.</strong><a href="#jwt의-구조" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>JWT는 .을 기준으로 3가지 부분으로 나눠어져 있다.</p><p><img data-src="/assets/img/mdImage/jwt구조.png" alt="jwt구조" data-proofer-ignore></p><h3 id="헤더header"><strong>헤더(Header)</strong><a href="#헤더header" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>header는 두가지의 정보를 갖고 있다.</p><p><strong>typ</strong>: 토큰의 타입을 지정한다. JWT이다.</p><p><strong>alg</strong>: 해싱 알고리즘을 지정한다.<br /> 해싱 알고리즘으로는 주로 HMAC SHA256, RSA가 사용되며 이 알고리즘은 토큰을 검증할 때 사용되는 signature에서 <br /> 사용된다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">import</span> <span class="nn">base64</span>

    <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'secret_key'</span>

    <span class="c1">## header dictionary 선언
</span>    <span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"typ"</span> <span class="p">:</span> <span class="s">"JWT"</span><span class="p">,</span>
        <span class="s">"alg"</span> <span class="p">:</span> <span class="s">"HS256"</span>
    <span class="p">}</span>

    <span class="c1">## header json stringify
</span>    <span class="n">header_json</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span><span class="s">':'</span><span class="p">))</span>

    <span class="c1">## encode to base64
</span>    <span class="n">encodedHeader</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span><span class="n">header_json</span><span class="p">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="n">encodedHeader</span> <span class="o">=</span> <span class="n">encodedHeader</span><span class="p">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">b</span><span class="s">'='</span><span class="p">)</span>

    <span class="c1">## print header
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"encoded header : "</span><span class="p">,</span><span class="n">encodedHeader</span><span class="p">)</span>
</pre></table></code></div></div><p>헤더의 정보를 살펴보면, typ은 당연히 JWT이고, 해싱 알고리즘은 HMAC sha256을 지정해줬다.<br /> 이 json을 stringify해서 문자열로 만든후, base64로 인코딩을 하면, header가 완성된다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>b'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9'
</pre></table></code></div></div><ul><li>참고! HMAC sha256과 sha256은 비밀키를 사용하냐 안하냐의 차이다. HMAC이 비밀키를 사용한다.<li>참고! byte encoding된 문자열에 = 가 존재할 수도 있는데, 이걸 base64의 padding문자라고 부른다. 이 패딩 문자를 jwt에서는 제거해줘야한다. 그 이유는 마지막에 나온다.</ul><h3 id="내용payload"><strong>내용(payload)</strong><a href="#내용payload" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>토큰에 담을 정보가 포함된다. 여기에 담은 정보의 한 조각을 <strong>클레임(claim)</strong>이라고 부른다.<br /> 이는 json 처럼 key-value pair의 구조를 가진다.<br /> 토큰에는 여러개의 claim을 넣을 수 있다.</p><p>클레임의 종류는 크게 세가지로 구분된다.</p><ol><li>등록된(registered) 클레임<li>공개(public) 클레임<li>비공개(private) 클레임</ol><p>등록된 클레임은 규격으로 등록하는 거라고 보면 되고,<br /> 공개, 비공개는 사용자가 커스텀하게 등록하는 클레임이라고 보면 된다.</p><p>더 자세하게 알아보면,</p><h4 id="등록된-클레임"><strong>등록된 클레임</strong><a href="#등록된-클레임" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>등록된 클레임은 서비스에서 필요한 정보들이 아닌, 토큰에 대한 정보를 담기 위해서 이름이 이미 정해진 클레임이다.<br /> 등록된 클레임의 사용은 선택적이다. 하지만 많은 경우 사용할 것을 권장한다.<br /> 간단하게 생각하면 토큰에 대한 메타데이터이다.</p><p>다음과 같은 종류가 있다.</p><ul><li>iss : 토큰 발급자 (issuer)<li>sub : 토큰 제목 (subject) -&gt; 주로 사용자 이메일을 사용하낟.<li>aud : 토큰 대상자 (audience)<li>exp : 토큰의 만료 시간(expiration), 포멧은 numericDate 형식이어야 하며 언제나 현재보다 이후로 설정되어야 한다.<li>nbf : not before = 토큰의 활성 날짜. 여기도 numericDate 형식이고, 이 날짜가 지나기 전까지는 토큰이 처리되지 않는다.<li>iat : 토큰이 발급된 시간(issued at), 이 값을 사용하여 토큰의 age가 얼마나 되었는지 판단할 수 있다.<li>jti : JWT의 고유 식별자로서, 주로 중복적인 처리를 방지하기 위해 사용된다. 일회용 토큰에 사용하면 유용하다.</ul><h4 id="공개-클레임"><strong>공개 클레임</strong><a href="#공개-클레임" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>사용자 정의 클레임으로 공개된 정보를 위해서 사용된다.<br /> 공개 클레임은 충돌이 방지된(collision-resistant) 이름을 갖고 있어야 한다.<br /> 사용자 정의 클레임이다.<br /> 충돌을 방지하기 위해서는, 클레임 이름을 URI형식으로 짓는다.<br /> 충돌 방지라는 건 공개 클레임간에 같은 이름을 갖는 경우를 말한다.<br /> 따라서 클레임을 이름이 겹치지 않을 만한 이름 URI나 UUID, OID를 사용한다.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"https://hmcck27.github.io"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h4 id="비공개-클레임"><strong>비공개 클레임</strong><a href="#비공개-클레임" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>등록된 클레임도 아니고, 공개된 클레임들도 아니다. 서버와 클라이언트 간의 협의된 데이터이다.<br /> 여기에 유저의 데이터가 담긴다.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jk"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hmcck27@gmail.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>예제로 payload를 만들어보자.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"iss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hmcck27.github.io"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"sub"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"token for you"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"aud"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"jk"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"exp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"지금 + 1일"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"iat"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"지금"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"https://hmcck27.github.io/jwt_claims/is_jk"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jk"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hmcck27@gmail.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>코드로 살펴보자.<br /> 위와 같은 payload을 만든다고 가정해보자.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">datetime</span>

    <span class="c1">## payload 선언
</span>    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
       <span class="s">"iss"</span> <span class="p">:</span> <span class="s">"hmcck27.github.io"</span><span class="p">,</span>
       <span class="s">"sub"</span> <span class="p">:</span> <span class="s">"token for you"</span><span class="p">,</span>
       <span class="s">"aud"</span> <span class="p">:</span> <span class="s">"jk"</span><span class="p">,</span>
       <span class="s">"exp"</span> <span class="p">:</span>  <span class="nb">int</span><span class="p">((</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)).</span><span class="n">timestamp</span><span class="p">()),</span>
       <span class="s">"iat"</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">timestamp</span><span class="p">()),</span>
       <span class="s">"https://hmcck27.github.io/jwt_claims/is_jk"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
       <span class="s">"username"</span><span class="p">:</span> <span class="s">"jk"</span><span class="p">,</span>
       <span class="s">"email"</span> <span class="p">:</span> <span class="s">"hmcck27@gmail.com"</span>
    <span class="p">}</span>

    <span class="c1">## json stringify
</span>    <span class="n">payload_json</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

    <span class="c1">## base 64 인코딩
</span>    <span class="n">encodedPayload</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span><span class="n">payload_json</span><span class="p">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="n">encodedPayload</span> <span class="o">=</span> <span class="n">encodedPayload</span><span class="p">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">b</span><span class="s">'='</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"encoded payload : "</span> <span class="p">,</span> <span class="n">encodedPayload</span><span class="p">)</span>

</pre></table></code></div></div><div class="language-text highlighter-rouge"><div class="code-header"> <span label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>encoded payload :  b'eyJpc3MiOiJobWNjazI3LmdpdGh1Yi5pbyIsInN1YiI6InRva2VuIGZvciB5b3UiLCJhdWQiOiJqayIsImV4cCI6MTY0Mzk0MTg1MSwiaWF0IjoxNjQzODU1NDUxLCJodHRwczovL2htY2NrMjcuZ2l0aHViLmlvL2p3dF9jbGFpbXMvaXNfamsiOnRydWUsInVzZXJuYW1lIjoiamsiLCJlbWFpbCI6ImhtY2NrMjdAZ21haWwuY29tIn0'
</pre></table></code></div></div><p>다음과 같이 잘 인코딩된다.<br /> 자 여기서 하나 의문점이 들수도 있다.<br /> 지금 payload를 만드는 걸 보니까, 단순하게 stringify + base64 인코딩이다.<br /> 그리고 이렇게 만드는 방식이 JWT의 표준이다.<br /> ?? 그러면 누가 헤더 뜯어서 Bear Token 뒤 문자열 가져와서 역순으로 base64디코딩하고 역직렬화하면 다 털리잖아 ? <br /> 그렇다.<br /> JWT의 payload는 암호화되지 않는다.<br /> 그래서 payload에는 민감한 정보를 담아서는 안된다.<br /> 중요한건 밑에 나올 signature이다.</p><h3 id="signature"><strong>signature</strong><a href="#signature" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>JWT의 마지막 부분은 서명이다.<br /> 이 서명은 header의 인코딩값과 payload의 인코딩값을 합친후 주어진 비밀키로 해쉬를 하여 생성한다.</p><p>header와 payload를 합칠때에는 concatenate의 방식이고, 두 문자열 사이에 . 이 하나가 들어간다.</p><p>위의 예시에서 합쳐진 string은 다음과 같다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9" + "." + "eyJpc3MiOiJobWNjazI3LmdpdGh1Yi5pbyIsInN1YiI6InRva2VuIGZvciB5b3UiLCJhdWQiOiJqayIsImV4cCI6MTY0Mzk0MTg1MSwiaWF0IjoxNjQzODU1NDUxLCJodHRwczovL2htY2NrMjcuZ2l0aHViLmlvL2p3dF9jbGFpbXMvaXNfamsiOnRydWUsInVzZXJuYW1lIjoiamsiLCJlbWFpbCI6ImhtY2NrMjdAZ21haWwuY29tIn0"

= eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJobWNjazI3LmdpdGh1Yi5pbyIsInN1YiI6InRva2VuIGZvciB5b3UiLCJhdWQiOiJqayIsImV4cCI6MTY0Mzk0MTg1MSwiaWF0IjoxNjQzODU1NDUxLCJodHRwczovL2htY2NrMjcuZ2l0aHViLmlvL2p3dF9jbGFpbXMvaXNfamsiOnRydWUsInVzZXJuYW1lIjoiamsiLCJlbWFpbCI6ImhtY2NrMjdAZ21haWwuY29tIn0
</pre></table></code></div></div><p>이 값을 비밀키로 해싱을 하고 base64로 인코딩한다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">hashlib</span>
    <span class="kn">import</span> <span class="nn">hmac</span>
   
    <span class="c1">## 두 인코딩 string 합치기
</span>    <span class="n">encodedHeaderPayload</span> <span class="o">=</span> <span class="n">encodedHeader</span> <span class="o">+</span> <span class="sa">b</span><span class="s">"."</span> <span class="o">+</span> <span class="n">encodedPayload</span>
   
    <span class="c1">## 비밀키 세팅
</span>    <span class="n">secret_key</span> <span class="o">=</span> <span class="s">"jk_sunfish"</span>
   
    <span class="c1"># 해싱 + base64 인코딩
</span>    <span class="n">module</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_key</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">encodedHeaderPayload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">)</span>
   
    <span class="n">digest</span> <span class="o">=</span> <span class="n">module</span><span class="p">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">crypted</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span>
    <span class="n">crypted</span> <span class="o">=</span> <span class="n">crypted</span><span class="p">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">b</span><span class="s">"="</span><span class="p">)</span>
   
    <span class="k">print</span><span class="p">(</span><span class="s">"crypted : "</span> <span class="p">,</span><span class="n">crypted</span><span class="p">)</span>
   
    <span class="k">print</span><span class="p">(</span><span class="s">'JWT : '</span><span class="p">,</span> <span class="n">encodedHeader</span> <span class="o">+</span> <span class="sa">b</span><span class="s">'.'</span> <span class="o">+</span> <span class="n">encodedPayload</span> <span class="o">+</span> <span class="sa">b</span><span class="s">'.'</span> <span class="o">+</span> <span class="n">crypted</span><span class="p">)</span>
</pre></table></code></div></div><p>출력은 다음과 같다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>crypted :  b'NBWuqtdxrj2VNBS7xy5Nach30L9Qp4MFYIPijPLinuA'  
</pre></table></code></div></div><h3 id="jwt-통합"><strong>JWT 통합</strong><a href="#jwt-통합" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>이 3개의 파트를 합치면 완성된 jwt가 된다.<br /> 한번 합쳐보고, 정말로 잘 토크나이징이 됐는지 검증해보자.</p><p>3개를 합친 결과는 이러하다.</p><div class="language-text highlighter-rouge"><div class="code-header"> <span label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>   JWT : b'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJobWNjazI3LmdpdGh1Yi5pbyIsInN1YiI6InRva2VuIGZvciB5b3UiLCJhdWQiOiJqayIsImV4cCI6MTY0Mzk1MTAzOCwiaWF0IjoxNjQzODY0NjM4LCJodHRwczovL2htY2NrMjcuZ2l0aHViLmlvL2p3dF9jbGFpbXMvaXNfamsiOnRydWUsInVzZXJuYW1lIjoiamsiLCJlbWFpbCI6ImhtY2NrMjdAZ21haWwuY29tIn0.NBWuqtdxrj2VNBS7xy5Nach30L9Qp4MFYIPijPLinuA'
</pre></table></code></div></div><p>JWT를 잘 만들었는지 확인해보자 !<br /> https://jwt.io/ 에서 직접 확인해 볼 수 있다.</p><p><img data-src="/assets/img/mdImage/jwt통합결과.png" alt="jwt통합결과" data-proofer-ignore></p><p>잘 만들었다 !</p><hr /><h2 id="의문점">의문점<a href="#의문점" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>다른 블로그 글과 문서들을 뒤적거리면서 해결되지 않았던 JWT의 여러 의문들에 대해서 정리해보자.</p><ol><li><p>url-safe하게 base64 인코딩 하는 이유 위의 코드에서 단순히 base64.b64encode()를 사용하지 않았다.</p><p>이 메소드를 사용해서 해보면 제대로 signature가 만들어지지 않는다.<br /> 왜냐하면 url-safe하지 않기 때문이다.</p><p>url에서 예약어처럼 쓰이는 특수문자들이 있는데, url 값 자체에 그러한 특수문자들이 들어가면 안된다.<br /> 그냥 base64인코딩하면 url-safe하지 않아서 “+”라던가 “/”, “=” 라던가의 특수문자들이 그대로 남아있다.<br /> url-safe하게 하면 이런 특수문자는 - 또는 _ 또는 공백으로 교체된다.</p><li><p>왜 payload는 암호화 안하는가 ? <br /> 아니 그냥 payload나 header도 암호화하면 안되요 ?<br /> 해도 된다.<br /> 개발자의 역량이고 클라이언트와 서버가 약속만 되어 있으면 상관없다.</p><p>근데 잘 생각해보자.<br /> 우리는 인증을 구현하는데 JWT를 사용한다.<br /> 인증이라는건 적합한 유저임을 서버가 알고 리소스를 내주는 것이다.</p><p>적합한 유저라는 건 서버가 직접 토큰을 내려준 유저를 의미한다.<br /> 그리고 그걸 증명하는건 payload도 header도 아닌 signature이다.</p><p>간단한 예시.<br /> payload를 보고 서버는 생각한다. “아 너 이름이 개복치고, 이메일은 어쩌구라고 ?”<br /> signature를 보고 서버는 생각한다. “근데 너가 그렇다고 했는데 진짜 너인지 확인해보자 ! 너만 아는 퀴즈를 낼거야”<br /> 의 프로세스이다.</p><p>따라서 굳이 payload나 header를 암호화할 필요는 없다 ! (하면 안된다가 아니다.)<br /> 물론 한다면 클라이언트에서 암호화 + 서버에서 복호화하는 작업이 추가적으로 필요할 뿐이다.</p><li><p>공개 클레임은 도대체 뭐하는 클레임인가 ?</p><blockquote><p>그럼 왜 공개 클레임과 비공개 클레임 ? 둘다 공개잖아.. 클레임 암호화 안되잖아 !</p></blockquote><p>실제로 이 이유에 대해서 말해주는 블로그 글이나 구글링해도 잘 안나와서 웹 rfc7519 표준을 뒤져봤다.<br /> JWT의 공식문서인데, 거기에 공개 클레임에 대해서 이렇게 설명한다.</p><p>클레임의 종류는 다른 관점으로 분류해보면 두가지 이다.<br /> 충돌 가능 or 충돌 불가능<br /> 여기서 충돌 가능은 비공개 클레임을 의미한다.<br /> 비공개 클레임이 애초에 클라이언트와 서버의 멋대로 규칙이니까.<br /> 근데 충돌 불가능한 클레임은 뭘까 ?<br /> 여기서는 등록된 클레임과 공개 클레임을 말한다.<br /> 등록된 클레임은 규격이다.<br /> 근데 공개 클레임은 규격도 아니고 커스텀이다.<br /> ?? 커스텀인데 어떻게 충돌이 안생겨</p><p>그니까 비공개는 다른 클라이언트-서버의 JWT랑 겹칠 수 있는것도 알아.<br /> 등록된 클레임은 어차피 규격이니까 신경 안써도 돼.<br /> 근데 공개 클레임은 겹칠수 없는건데 커스텀하다는 건 무슨 말이지 ?</p><p>갑자기 이상한 얘기로 새는데, 궁금해서 더 찾아봤다.</p><p>공개 클레임은 Collision-Resistant Name이라고 설명된다.<br /> collision-resistant name의 name은 namespace의 name이다. <br /> namespace가 뭐냐면 name들의 집합 + 각 개체에 name을 할당하는 시스템이다.<br /> namespace의 예시로 파일시스템은 파일에 이름을 할당하는 name space이다.<br /> namespace에는 collision-resistant namespace가 있는데 말 그래도 겹치지 않게 이름을 할당하는 namespace를 의미한다.<br /> 네트워크라는 namespace는 웹에 연결된 개체 (컴퓨터, 서버, 핸드폰, 등등) 에게 name을 할당한다.<br /> 그게 도메인, ip, 등등이 있다.<br /> 그리고 이 name들은 전부 다르다.<br /> 단 하나도 겹치는게 없다 !<br /> 즉 collision-resistant 하다.<br /> 위에서 공개 클레임의 예시로 도메인을 썻는데, 도메인은 collision-resistant하게 네트워크라는 namespace가 할당한 name이다.<br /> 또 다른 공개 클레임의 예시로는 UUID, OID가 있다.<br /> 다 겹치지 않는 친구들이다.<br /> 그래서 공개 클레임은 커스텀한데 충돌은 없는 클레임이다.</p><p>뿌듯</p></ol><hr /><h2 id="정리"><strong>정리</strong><a href="#정리" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>직접 JWT를 만들어 봤는데 실제로 이런 과정을 직접 할 일은 없다.<br /> 왜냐하면 대부분의 언어, 프레임워크에 JWT구현체가 있다. <br /> 그래도 직접 만들어 보는게 더 재밌다..!</p><p>JWT가 세션의 문제점들을 모두 해결하고 현대 웹의 인증이 가진 모든 문제를 해결하는건 아니다.<br /> 단점도 있다.</p><ol><li>인코딩하니까 당연히 데이터가 뻥튀기된다. = 전달할 http 패킷의 바이트가 많아진다. = 속도 느림 = 손실 가능성 올라감<li>payload에는 민감한 정보를 못담는다.<li>토큰이 탈취당하면 만료될때까지 대처가 불가능하다.</ol><p>이 단점들을 해결하는 방법인<br /> 유효시간과 재발급에 대해서는 다음에 정리해보자.</p><p>여튼 끝 !</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/'>인증/인가</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/jwt/" class="post-tag no-text-decoration" >JWT</a> <a href="/tags/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/" class="post-tag no-text-decoration" >인증/인가</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JWT - 개복치의 개발 블로그&url=https://hmcck27.github.io/posts/JWT/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JWT - 개복치의 개발 블로그&u=https://hmcck27.github.io/posts/JWT/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=JWT - 개복치의 개발 블로그&url=https://hmcck27.github.io/posts/JWT/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/spring-IoC(2)/">Spring IoC (2)</a><li><a href="/posts/Annotation/">Annotation</a><li><a href="/posts/DtoToMap/">Dto to Map, with naming convention</a><li><a href="/posts/DTO%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B0%9B%EA%B8%B0/">controller 파라미터 map -> dto 변환과정</a><li><a href="/posts/%EB%B0%B1%EC%A4%80-14226/">백준 14226 이모티콘</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a> <a class="post-tag" href="/tags/implementation/">implementation</a> <a class="post-tag" href="/tags/annotation/">Annotation</a> <a class="post-tag" href="/tags/bfs/">BFS</a> <a class="post-tag" href="/tags/dependency-injection/">Dependency Injection</a> <a class="post-tag" href="/tags/ioc/">IoC</a> <a class="post-tag" href="/tags/jackson/">Jackson</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spring-security(1)/"><div class="card-body"> <em class="timeago small" date="2022-02-08 00:00:00 +0800" >Feb 8</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>spring security (1)</h3><div class="text-muted small"><p> Spring Security Spring Security에 대해서 알아볼 시간이 됬다 ! 지난 시간동안 개발하면서 스프링을 사용했고, 스프링 시큐리티는 필수로 사용했는데 깊은 이해가 없이 진행했었다. 따라서 이번 기회에 한번 정리해볼 생각이다. 지난 포스트들에서 우리는 인증/인가, 토큰/세션, 대표적인 토큰 JWT에 대해서 정리했다. 이번에는 ...</p></div></div></a></div><div class="card"> <a href="/posts/spring-security(2)/"><div class="card-body"> <em class="timeago small" date="2022-02-09 00:00:00 +0800" >Feb 9</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>spring security (2)</h3><div class="text-muted small"><p> Servlet Authentication Architecture 이전에 우리는 스프링 시큐리티에서 서블렛 딴의 구조를 알아봤다. 즉 하나의 요청이 들어오고 어떻게 필터를 거치는지에 대해서 알아봤다. 이번에는 spring security의 authentication의 구체적인 구조를 알아보자. 서블렛 객체가 httprequest를 갖기 이전에 필터...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9D%B8%EC%A6%9D%EA%B3%BC%EC%9D%B8%EA%B0%80/"><div class="card-body"> <em class="timeago small" date="2022-02-04 00:00:00 +0800" >Feb 4</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인증과 인가</h3><div class="text-muted small"><p> 인증과 인가 어플리케이션을 개발할때, 로그인 기능이 필요하다면 우리는 회원가입, 로그인 기능을 개발한다. 나도 실제로 서비스를 개발하면서 회원가입, 로그인을 개발할 일이 있었는데 자세하게 정리해본 적이 없어서 이번 기회에 정리해보려 한다. 인증/인가에 대해서 먼저 알아보자. 인증과 인가는 무엇이 다를까 ? 간단한 예시를 들어 생각해보자. 내가...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%ED%86%A0%ED%81%B0%EA%B3%BC%EC%84%B8%EC%85%98/" class="btn btn-outline-primary" prompt="Older"><p>토큰과 세션</p></a> <a href="/posts/Copy%EC%9D%98%EC%A2%85%EB%A5%98/" class="btn btn-outline-primary" prompt="Newer"><p>Copy의 종류</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/hmcck27">Choi Jin Kyu</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a> <a class="post-tag" href="/tags/implementation/">implementation</a> <a class="post-tag" href="/tags/annotation/">Annotation</a> <a class="post-tag" href="/tags/bfs/">BFS</a> <a class="post-tag" href="/tags/dependency-injection/">Dependency Injection</a> <a class="post-tag" href="/tags/ioc/">IoC</a> <a class="post-tag" href="/tags/jackson/">Jackson</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
